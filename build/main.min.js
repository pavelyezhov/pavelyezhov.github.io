!function(){return function e(t,n,i){function s(r,o){if(!n[r]){if(!t[r]){var u="function"==typeof require&&require;if(!o&&u)return u(r,!0);if(a)return a(r,!0);var h=new Error("Cannot find module '"+r+"'");throw h.code="MODULE_NOT_FOUND",h}var c=n[r]={exports:{}};t[r][0].call(c.exports,function(e){var n=t[r][1][e];return s(n||e)},c,c.exports,e,t,n,i)}return n[r].exports}for(var a="function"==typeof require&&require,r=0;r<i.length;r++)s(i[r]);return s}}()({1:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();var s=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return i(e,[{key:"init",value:function(){this.database=firebase.database(),this.framesRef=this.database.ref("frame"),this.framesRef.off()}},{key:"loadItems",value:function(e){return console.log("Data: "),this.framesRef=this.database.ref("frame"),this.framesRef.off(),this.framesRef}},{key:"loadGame",value:function(e){return this.gameRef=this.database.ref("games/"+e),this.gameRef.off(),this.gameRef}},{key:"loadGames",value:function(){return this.database||(this.database=firebase.database()),this.gamesRef=this.database.ref("games"),this.gamesRef.off(),this.gamesRef}},{key:"saveFrame",value:function(e,t,n){this.framesRef=this.database.ref("frames"),this.framesRef.off(),this.database.ref("frame/"+e+t).set({content:JSON.stringify(n)})}},{key:"saveGame",value:function(e,t,n){var i=this;this.gamesRef=this.database.ref("games"),this.gamesRef.off(),this.loadGames().once("value").then(function(s){var a;a=s.val()&&Object.values(s.val())?Object.values(s.val()).length+1:1,i.database.ref("games/"+a).set({game:JSON.stringify(e),player:n,score:t,time:Date.now()})})}},{key:"getFrameObjectsByFrameIdAndType",value:function(e,t){return this.framesRef=this.database.ref("frame"),this.framesRef.off(),this.framesRef.child(e+t)}}]),e}();n.default=s},{}],2:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();var s=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.frameStoreId="frameStoreId",this.playerRecordsId="playerRecordsId",this.storage=localStorage}return i(e,[{key:"getStoredData",value:function(e){return JSON.parse(this.storage.getItem(e))}},{key:"saveObject",value:function(e,t){var n=this.getStoredData(this.frameStoreId);return null===n&&(n=[]),n[t]||(n[t]={enemies1:[],enemies2:[],hero:{}}),this.addItemToStore(e,n[t]),this.storage.setItem(this.frameStoreId,JSON.stringify(n)),e}},{key:"addItemToStore",value:function(e,t){e instanceof EnemyType1?t.enemies1.push(e):e instanceof EnemyType2?t.enemies2.push(e):e instanceof Person&&(t.hero=e)}},{key:"getItemsByFrameId",value:function(e){return JSON.parse(this.storage.getItem(this.frameStoreId))[e]}},{key:"clearFrames",value:function(){this.getStoredData(this.frameStoreId);this.storage.setItem(this.frameStoreId,JSON.stringify(null))}},{key:"saveRecord",value:function(e,t){var n=this.getStoredData("playerRecordsId");null===n&&(n={});var i=n[t];(!i||i<e)&&(n[t]=e),this.storage.setItem(this.playerRecordsId,JSON.stringify(n))}}]),e}();n.default=s},{}],3:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=o(e("./Person")),a=o(e("./GameArenaInstance.js")),r=o(e("../settings/JesusImgSettings"));function o(e){return e&&e.__esModule?e:{default:e}}var u=function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:30,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:30,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"red",a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600,r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:300,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,u=arguments.length>7&&void 0!==arguments[7]?arguments[7]:5,h=arguments.length>8&&void 0!==arguments[8]?arguments[8]:200,c=arguments.length>9&&void 0!==arguments[9]?arguments[9]:0,l=arguments.length>10&&void 0!==arguments[10]?arguments[10]:"right";!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var d=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return d.ctx=e,d.width=n,d.height=i,d.color=s,d.angle=0,d.moveAngle=0,d.x=a,d.y=r,d.speedV=o,d.speedH=u,d.imgWidth=32,d.imgHeight=48,d.visionRadius=h,d.moveDirection=l,d.sprites=[].slice.call(document.querySelectorAll(".Jesus-img")),d.spriteNum=0,d.i=c,d}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.default),i(t,[{key:"newPos",value:function(e,t){var n,i,s,r,o,u,h,c,l,d;return this.heroInVision()?(h=this.x,c=3,l=a.default.getPersonPosition().xPerson-h,d=0===l?0:l>0?1:-1,n=Math.abs(l)<c?d:d*c,s=this.y,r=3,o=a.default.getPersonPosition().yPerson-s,u=0===o?0:o>0?1:-1,i=Math.abs(o)<r?0:u*r):(n=this.speedH,i=this.speedV),this.defineMoveDirection(n,i),this.x+=n,this.y+=i,this.x>e?this.x=0:this.x<0&&(this.x=e),this.y>t?this.y=0:this.y<0&&(this.y=t),this}},{key:"defineMoveDirection",value:function(e,t){e>0&&(this.moveDirection="right"),e<0&&(this.moveDirection="left"),0===e&&(this.moveDirection=t>=0?"up":"down")}},{key:"xPlusDelta",value:function(e,t,n){return e+t<0?0:e+t>n?n:e+t}},{key:"yPlusDelta",value:function(e,t,n){return e+t<0?0:e+t>n?n:e+t}},{key:"update",value:function(e,t){var n=this.x,i=this.y;e.save(),e.translate(this.x,this.y);var s=this.getJesusImg();return e.drawImage(this.getSprite(),s.sx,s.sy,s.sWidth,s.sHeight,this.imgWidth/-2,this.imgHeight/-2,this.imgWidth,this.imgHeight),this.i+=1,this.i%4==0&&(this.i=0),e.restore(),t&&(e.beginPath(),e.arc(n,i,this.visionRadius,0,2*Math.PI,!1),e.lineWidth=1,e.strokeStyle="#003300",e.stroke()),this}},{key:"getSprite",value:function(){return this.spriteNum=(this.spriteNum+1)%this.sprites.length,this.sprites[this.spriteNum]}},{key:"getJesusImg",value:function(){return"up"===this.moveDirection?r.default.getUpSettings()[this.i]:"down"===this.moveDirection?r.default.getDownSettings()[this.i]:"left"===this.moveDirection?r.default.getLeftSettings()[this.i]:"right"===this.moveDirection?r.default.getRightSettings()[this.i]:r.default.getDownSettings()[this.i]}},{key:"heroInVision",value:function(){var e=a.default.getPersonPosition(),t=e.xPerson-this.x,n=e.yPerson-this.y;return Math.sqrt(Math.pow(t,2)+Math.pow(n,2))<=this.visionRadius}},{key:"getItemType",value:function(){return"EnemyType1"}}]),t}();n.default=u},{"../settings/JesusImgSettings":15,"./GameArenaInstance.js":6,"./Person":9}],4:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=r(e("./Person")),a=r(e("../settings/CatImgSettings"));function r(e){return e&&e.__esModule?e:{default:e}}var o=function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:32,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:32,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"blue",a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:400,r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:400,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,u=arguments.length>7&&void 0!==arguments[7]?arguments[7]:"right";!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var h=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return h.ctx=e,h.width=n,h.height=i,h.color=s,h.speed=5,h.angle=0,h.moveAngle=0,h.x=a,h.y=r,h.imgWidth=32,h.imgHeight=32,h.sprites=[].slice.call(document.querySelectorAll(".cat-img")),h.spriteNum=0,h.moveDirection=u,h.i=o,h}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.default),i(t,[{key:"getSprite",value:function(){return this.spriteNum=(this.spriteNum+1)%this.sprites.length,this.sprites[this.spriteNum]}},{key:"newPos",value:function(e,t){return this.doStepDependingOnDirection(),this.x>e?this.x=0:this.x<0&&(this.x=e),this.y>t?this.y=0:this.y<0&&(this.y=t),this}},{key:"doStepDependingOnDirection",value:function(){"right"===this.moveDirection?this.x+=this.speed:"left"===this.moveDirection?this.x-=this.speed:"up"===this.moveDirection?this.y-=this.speed:"down"===this.moveDirection&&(this.y+=this.speed)}},{key:"update",value:function(e){e.save(),e.translate(this.x,this.y);var t=this.getCatImg();return e.drawImage(this.getSprite(),t.sx,t.sy,t.sWidth,t.sHeight,this.imgWidth/-2,this.imgHeight/-2,this.imgWidth,this.imgHeight),this.i+=1,this.i%4==0&&(this.i=0),e.restore(),this}},{key:"getItemType",value:function(){return"EnemyType2"}},{key:"getCatImg",value:function(){return"up"===this.moveDirection?a.default.getUpSettings()[this.i]:"down"===this.moveDirection?a.default.getDownSettings()[this.i]:"left"===this.moveDirection?a.default.getLeftSettings()[this.i]:"right"===this.moveDirection?a.default.getRightSettings()[this.i]:a.default.getDownSettings()[this.i]}}]),t}();n.default=o},{"../settings/CatImgSettings":14,"./Person":9}],5:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=g(e("../dao/FireBaseDao")),a=g(e("../dao/LocalStorageDao")),r=g(e("../service/DrawService")),o=g(e("./GameCache")),u=g(e("./EnemyType1")),h=g(e("./EnemyType2")),c=g(e("./Person")),l=g(e("./Levels")),d=e("../script"),f=g(e("./GameArenaInstance.js"));function g(e){return e&&e.__esModule?e:{default:e}}var m=function(){function e(t,n,i,u){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.fbDao=new s.default,this.lsDao=new a.default,this.fbDao.init(),this.gameCache=new o.default,this.drawService=new r.default(this.lsDao),this.stepId=0,this.score=0,this.canvas=t,this.ctx=this.canvas.getContext("2d"),this.person=new u,this.enemies=[],this.enemies.push(new h.default),this.enemies.push(new h.default(this.ctx,16,16,"blue",700,700,0,"down")),this.canvas.width=n,this.canvas.height=i,this.img=new Image,this.img.src="img/grass.png",this.currLvl=1,this.lvls=l.default.getLevels(),!1===f.default.getInReplay()&&f.default.getShowBackground()&&this.ctx.drawImage(this.img,0,0,this.canvas.width,this.canvas.height),f.default.getInReplay()&&void 0!==this.frames[this.stepId].imageSource&&(this.img=new Image,this.img.src=this.frames[this.stepId].imageSource,this.ctx.drawImage(this.img,0,0,this.canvas.width,this.canvas.height)),this.updateState()}return i(e,[{key:"start",value:function(){var e=this;this.frameNo=0,this.interval=setInterval(this.updateState.bind(this),50),window.addEventListener("keydown",function(t){e.keys=e.keys||[],e.keys[t.keyCode]="keydown"==t.type}),window.addEventListener("keyup",function(t){e.keys[t.keyCode]="keydown"==t.type})}},{key:"stop",value:function(){clearInterval(this.interval)}},{key:"clear",value:function(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),!1===f.default.getInReplay()&&f.default.getShowBackground()&&this.ctx.drawImage(this.img,0,0,this.canvas.width,this.canvas.height),f.default.getInReplay()&&void 0!==this.frames[this.stepId].imageSource&&(this.img=new Image,this.img.src=this.frames[this.stepId].imageSource,this.ctx.drawImage(this.img,0,0,this.canvas.width,this.canvas.height))}},{key:"updateState",value:function(){var e=this;if(this.stepId+=1,this.stepId%10==0&&(this.score+=1,this.updateScoreArea()),this.clear(),!this.anyCollisionOccurred(this.person,this.enemies)||this.finishGame()){this.checkCurrentLevelPassed();var t=!1===f.default.getInReplay()&&f.default.getShowRadiuses(),n=f.default.getInReplay()&&!0===this.frames[this.stepId].showRadiuses||t;this.person.newPos({right:this.keys&&this.keys[39],left:this.keys&&this.keys[37],up:this.keys&&this.keys[38],down:this.keys&&this.keys[40]},this.canvas.width,this.canvas.height).update(this.ctx);this.gameCache.saveHero(this.person,this.stepId),this.enemies.forEach(function(t){f.default.getPersonPosition();t.newPos(e.canvas.width,e.canvas.height).update(e.ctx,n),e.gameCache.saveEnemy(t,e.stepId)}),f.default.getShowBackground()&&this.gameCache.saveBackGroundImage(this.img.src,this.stepId),this.gameCache.savePersonRadiusesShowOption(this.stepId,f.default.getShowRadiuses())}}},{key:"checkCurrentLevelPassed",value:function(){var e=this.lvls[this.currLvl-1];e&&this.score>e.winScoreLimit&&(bootbox.alert("Level "+this.currLvl+" is completed! Press ok to continue"),this.currLvl+=1,this.stop(),(0,d.resetStartButtonToInitialState)(),e.enemies&&(this.enemies=this.enemies.concat(e.enemies)),this.person=new c.default,this.keys=void 0)}},{key:"anyCollisionOccurred",value:function(e,t){for(var n=0;n<t.length;n++)if(this.collisionOccurred(e,t[n]))return!0;return!1}},{key:"collisionOccurred",value:function(e,t){var n=!1,i=!1;return e.x+e.width/2>=t.x-t.width/2&&e.x-e.width/2<=t.x+t.width/2&&(n=!0),e.y+e.height/2>=t.y-t.height/2&&e.y-e.height/2<=t.y+t.height/2&&(i=!0),n&&i}},{key:"updateScoreArea",value:function(){document.getElementById("scoreNumber").innerHTML=this.score}},{key:"resetScore",value:function(){document.getElementById("scoreNumber").innerHTML=0}},{key:"finishGame",value:function(){var t=this;this.stop(),bootbox.prompt({title:"Enter you name",value:"Unnamed user",callback:function(n){n&&(t.fbDao.saveGame(t.gameCache.frames,t.score,n),t.lsDao.saveRecord(t.score,n)),(0,d.resetStartButtonToInitialState)(),t.resetScore(),f.default.setGameArenaInstance(new e(t.canvas,t.canvas.width,t.canvas.height,c.default)),t.clear()}})}},{key:"replayLastGame",value:function(){var e=this;this.fbDao.loadGames().once("value").then(function(t){var n=Object.values(t.val()).length;e.fbDao.loadGame(n).once("value").then(function(t){e.frames=JSON.parse(Object.values(t.val())[0]),e.interval=setInterval(e.drawFrame2.bind(e),50)})})}},{key:"replaySelectedGame",value:function(e){var t=this;this.fbDao.loadGames().once("value").then(function(n){t.fbDao.loadGame(e).once("value").then(function(e){t.frames=JSON.parse(Object.values(e.val())[0]),t.interval=setInterval(t.drawFrame2.bind(t),50)})})}},{key:"drawFrame2",value:function(){var e=this,t=this.frames[this.stepId];if(!t)return this.stop(),void(this.stepId=1);this.clear();var n=JSON.parse(t.hero);new c.default(this.ctx,n.width,n.height,n.color,n.x,n.y,n.imgWidth,n.imgHeight,n.moveDirection,n.i).update(this.ctx);var i=!1===f.default.getInReplay()&&f.default.getShowRadiuses(),s=f.default.getInReplay()&&!0===this.frames[this.stepId].showRadiuses||i;t.enemies.forEach(function(t){var n=JSON.parse(t);n.visionRadius?new u.default(e.ctx,n.width,n.height,n.color,n.x,n.y,n.speedV,n.speedH,n.visionRadius,n.i).update(e.ctx,s):new h.default(e.ctx,n.width,n.height,n.color,n.x,n.y,n.i).update(e.ctx)}),this.stepId++}},{key:"drawFrame",value:function(){var e=this;this.fbDao.getFrameObjectsByFrameIdAndType(this.stepId,"hero").once("value").then(function(t){e.clear();var n=JSON.parse(t.child("content").val());new c.default(e.ctx,n.width,n.height,n.color,n.x,n.y,n.imgWidth,n.imgHeight,n.moveDirection,n.i).update(e.ctx),e.stepId++})}}]),e}();n.default=m},{"../dao/FireBaseDao":1,"../dao/LocalStorageDao":2,"../script":12,"../service/DrawService":13,"./EnemyType1":3,"./EnemyType2":4,"./GameArenaInstance.js":6,"./GameCache":7,"./Levels":8,"./Person":9}],6:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();var s=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return i(e,null,[{key:"getGameArenaInstance",value:function(){return this.gameArena}},{key:"setGameArenaInstance",value:function(e){this.gameArena=e}},{key:"getPersonPosition",value:function(){return this.personPosition}},{key:"setPersonPosition",value:function(e){this.personPosition=e}},{key:"getShowBackground",value:function(){return this.showBackground}},{key:"setShowBackground",value:function(e){this.showBackground=e}},{key:"getShowRadiuses",value:function(){return this.showRadiusesId}},{key:"setShowRadiuses",value:function(e){this.showRadiusesId=e}},{key:"getInReplay",value:function(){return this.inReplay}},{key:"setInReplay",value:function(e){this.inReplay=e}}]),e}();n.default=s},{}],7:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();var s=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.frames=[]}return i(e,[{key:"saveHero",value:function(e,t){this.frames[t]||this.initFrame(t),this.frames[t].hero=JSON.stringify(e)}},{key:"saveEnemy",value:function(e,t){this.frames[t]||this.initFrame(t),this.frames[t].enemies.push(JSON.stringify(e))}},{key:"saveBackGroundImage",value:function(e,t){this.frames[t]||this.initFrame(t),this.frames[t].imageSource=e}},{key:"savePersonRadiusesShowOption",value:function(e,t){this.frames[e]||this.initFrame(e),this.frames[e].showRadiuses=t}},{key:"initFrame",value:function(e){0===this.frames.length?(this.frames.push({hero:{},enemies:[]}),this.frames.push({hero:{},enemies:[]})):this.frames[e]={hero:{},enemies:[]}}}]),e}();n.default=s},{}],8:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=r(e("./EnemyType1")),a=r(e("./EnemyType2"));function r(e){return e&&e.__esModule?e:{default:e}}var o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return i(e,null,[{key:"getLevels",value:function(){return[{winScoreLimit:10,imgSource:void 0,enemies:[new s.default(this.ctx,15,15,"red",600,300,-3,10,200,0),new s.default(this.ctx,15,15,"red",200,300,-5,-5,200,0)]},{winScoreLimit:20,imgSource:void 0,enemies:[new a.default,new a.default,new s.default(this.ctx,15,15,"red",600,300,-3,10,200,0),new s.default(this.ctx,15,15,"blue",300,600,-3)]},{winScoreLimit:30,imgSource:void 0,enemies:[new a.default(this.ctx,32,32,"blue",400,100,0,"up"),new a.default(this.ctx,32,32,"blue",400,423,0,"right"),new a.default(this.ctx,32,32,"blue",234,576,0,"left"),new a.default(this.ctx,32,32,"blue",123,123,0,"down"),new s.default(this.ctx,20,20,"orange",300,800,-4),new s.default(this.ctx,15,15,"red",465,234,-5,-5,200,0,"left"),new s.default,new s.default(this.ctx,15,15,"blue",300,600,-3)]}]}}]),e}();n.default=o},{"./EnemyType1":3,"./EnemyType2":4}],9:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=r(e("../settings/PersonImgSettings")),a=r(e("./GameArenaInstance.js"));function r(e){return e&&e.__esModule?e:{default:e}}var o=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:30,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"green",a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:900,r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:50,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:100,u=arguments.length>7&&void 0!==arguments[7]?arguments[7]:100,h=arguments.length>8&&void 0!==arguments[8]?arguments[8]:"up",c=arguments.length>9&&void 0!==arguments[9]?arguments[9]:0;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.ctx=t,this.width=n,this.height=i,this.imgWidth=o,this.imgHeight=u,this.color=s,this.speed=0,this.angle=0,this.moveAngle=0,this.x=a,this.y=r,this.sprites=[].slice.call(document.querySelectorAll(".person-img")),this.spriteNum=0,this.moveDirection=h,this.i=c}return i(e,[{key:"getSprite",value:function(){return this.spriteNum=(this.spriteNum+1)%this.sprites.length,this.sprites[this.spriteNum]}},{key:"update",value:function(e){e.save(),e.save(),e.translate(this.x,this.y);var t=this.getPersonImg();return e.drawImage(this.getSprite(),t.sx,t.sy,t.sWidth,t.sHeight,this.imgWidth/-2,this.imgHeight/-2,this.imgWidth,this.imgHeight),e.restore(),this.i+=1,this.i%6==0&&(this.i=0),this}},{key:"newPos",value:function(e,t,n){this.moveAngle=0,this.speed=0,this.deltaX=0,this.deltaY=0;e.left&&(this.deltaX=-10)&&(this.moveDirection="left"),e.right&&(this.deltaX=10)&&(this.moveDirection="right"),e.up&&(this.deltaY=10)&&(this.moveDirection="up"),e.down&&(this.deltaY=-10)&&(this.moveDirection="down");return this.x+=this.deltaX,this.y-=this.deltaY,a.default.setPersonPosition({xPerson:this.x,yPerson:this.y}),this.x>t?this.x=0:this.x<0&&(this.x=t),this.y>n?this.y=0:this.y<0&&(this.y=n),this}},{key:"getPersonImg",value:function(){return"up"===this.moveDirection?s.default.getUpSettings()[this.i]:"down"===this.moveDirection?s.default.getDownSettings()[this.i]:"left"===this.moveDirection?s.default.getLeftSettings()[this.i]:"right"===this.moveDirection?s.default.getRightSettings()[this.i]:s.default.getDownSettings()[this.i]}}]),e}();n.default=o},{"../settings/PersonImgSettings":16,"./GameArenaInstance.js":6}],10:[function(e,t,n){"use strict";(0,e("./script").prepareElements)()},{"./script":12}],11:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();var s=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.routes=t.routes||[],this.eventBus=t.eventBus,this.init()}return i(e,[{key:"init",value:function(){var e=this;window.addEventListener("hashchange",function(){return e.handleUrl(window.location.hash)}),this.handleUrl(window.location.hash)}},{key:"findPreviousActiveRoute",value:function(){return this.currentRoute}},{key:"findNewActiveRoute",value:function(e){var t=e.split("#").pop();return this.routes.find(function(e){return"string"==typeof e.match?e.match===t:e.match instanceof RegExp?e.match.test(t):"function"==typeof e.match?e.match(t):void 0})}},{key:"getRouteParams",value:function(e,t){var n=t.match(e.match)||[];return n.shift(),n}},{key:"handleUrl",value:function(e){e=e.slice(1);var t=this.findPreviousActiveRoute(),n=this.findNewActiveRoute(e),i=this.getRouteParams(n,e);t&&t.onLeave&&t.onLeave(this.currentRouteParams),n&&n.onBeforeEnter&&n.onBeforeEnter(i),n&&n.onEnter&&n.onEnter(i),this.currentRoute=n,this.currentRouteParams=i}}]),e}();n.default=s},{}],12:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.prepareElements=function(){var e,t=document.documentElement.clientWidth,n=document.documentElement.clientHeight-document.getElementsByTagName("nav")[0].clientHeight;h.default.setPersonPosition({xPerson:0,yPerson:0});var c=new s.default,g=new i.default,m=document.querySelector("canvas"),v=new a.default(c);h.default.setGameArenaInstance(new u.default(m,t,n,o.default));var y=[{name:"game",match:/[/]game/,onBeforeEnter:function(){var e=document.getElementById("gameArea");e&&(e.className="gameArea active",l(),document.getElementById("replayArea").className="replayArea passive",document.getElementById("controlsArea").className="",d("gameLink","active"))},onEnter:function(){},onLeave:function(){h.default.getGameArenaInstance().stop();var e=document.getElementById("gameArea");e.className="gameArea passive";var t=document.getElementById("controlsArea");t.children[0].src="img/play.png",d("gameLink",""),h.default.getGameArenaInstance().stop()}},{name:"showGame",match:/[/]showGame/,onBeforeEnter:function(){var e=document.getElementById("gameArea");e&&(e.className="gameArea active")},onEnter:function(){},onLeave:function(){var e=document.getElementById("gameArea");e.className="gameArea passive";var t=document.getElementById("controlsArea");t.children[0].src="img/play.png";var n=document.getElementById("replayArea");n.className="replayArea passive",h.default.getGameArenaInstance().stop()}},{name:"records",match:/[/]records/,onBeforeEnter:function(){var e=document.getElementById("recordsArea");e.className="active",e.style.width=document.documentElement.clientWidth,e.style.height=document.documentElement.clientHeight;var t=document.getElementById("recordTableId");t.innerHTML=v.createRecordTableHTML(),t.className="table",d("recordLink","active")},onEnter:function(){},onLeave:function(){var e=document.getElementById("recordsArea");e.className="recordsArea passive";var t=document.getElementById("recordTableId");t.className="tableArea passive",d("recordLink","")}},{name:"replays",match:/[/]replays/,onBeforeEnter:function(){d("replayLink","active");var e=document.getElementById("replaysPage");e.className="replaysPage active",e.style.width=document.documentElement.clientWidth,e.style.height=document.documentElement.clientHeight;var t=document.getElementById("replaysTableId");g.loadGames().once("value").then(function(e){t.innerHTML=v.createReplayTableHTML(Object.values(e.val())),t.className="table"})},onEnter:function(){return console.log("onEnter replays")},onLeave:function(){d("replayLink","");var e=document.getElementById("replaysPage");e.className="replaysPage passive";var t=document.getElementById("replaysTableId");t.className="tableArea passive"}},{name:"about",match:/[/]about/,onBeforeEnter:function(){d("aboutLink","active"),d("aboutArea","aboutArea active")},onEnter:function(){return console.log("onEnter about")},onLeave:function(){d("aboutLink",""),f("aboutArea","aboutArea passive")}},{name:"options",match:/[/]options/,onBeforeEnter:function(){d("optionsLink","active"),d("settingsArea","settingsArea active")},onEnter:function(){return console.log("onEnter options")},onLeave:function(){d("optionsLink",""),f("settingsArea","settingsArea passive")}}];location.hash="/game";var p={routes:y};new r.default(p);document.getElementById("controlsArea").addEventListener("click",function(){var e=this.children[0].src;e.includes("play")?(h.default.getGameArenaInstance().start(),this.children[0].src="img/pause.png"):(h.default.getGameArenaInstance().stop(),this.children[0].src="img/play.png"),h.default.setInReplay(!1)}),document.getElementById("replayArea").addEventListener("click",function(){e||h.default.getGameArenaInstance().replayLastGame(),h.default.setInReplay(!0),h.default.getGameArenaInstance().replaySelectedGame(e)}),document.getElementById("replaysTableId").addEventListener("click",function(){"A"===event.target.tagName&&(e=Number(event.target.parentNode.parentNode.id),v.makePlayLastGameButtonVisible())}),document.getElementById("showBackgroundId").addEventListener("change",function(){var e=h.default.getShowBackground();null!=e?h.default.setShowBackground(!e):h.default.setShowBackground(this.checked)}),document.getElementById("showRadiusesId").addEventListener("change",function(){var e=h.default.getShowRadiuses();null!=e?h.default.setShowRadiuses(!e):h.default.setShowRadiuses(this.checked)})},n.resetStartButtonToInitialState=l;var i=c(e("./dao/FireBaseDao")),s=c(e("./dao/LocalStorageDao")),a=c(e("./service/DrawService")),r=c(e("./router/Router")),o=c(e("./game/Person")),u=c(e("./game/GameArena")),h=c(e("./game/GameArenaInstance.js"));function c(e){return e&&e.__esModule?e:{default:e}}function l(){document.getElementById("controlsArea").children[0].src="img/play.png"}function d(e,t){var n=document.getElementById(e);n.className=t,n.parentElement.className=t}function f(e,t){document.getElementById(e).className=t}},{"./dao/FireBaseDao":1,"./dao/LocalStorageDao":2,"./game/GameArena":5,"./game/GameArenaInstance.js":6,"./game/Person":9,"./router/Router":11,"./service/DrawService":13}],13:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();var s=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.dao=t}return i(e,[{key:"createRecordTableEl",value:function(){var e=document.createElement("table");return e.className="recordTable",e.innerHTML=this.createRecordTableHTML(),e.id="recordTableId",e}},{key:"createRecordTableHTML",value:function(){var e='<table  class="table"><thead><tr><th>Player</th><th>Score</th></tr></thead><tbody>',t=this.dao.getStoredData("playerRecordsId");for(var n in t)e+="<tr><td>"+n+"</td><td>"+t[n]+"</td></tr>";return e+="</tbody></table>"}},{key:"createReplayTableHTML",value:function(e){for(var t='<table class="table"><thead><tr><th>Player</th><th>Score</th><th>Time</th></tr></thead><tbody>',n=0;n<e.length;n++){var i=e[n].player,s=e[n].score,a=e[n].time;t+="<tr id="+(n+1)+'><td><a href="#/showGame">'+i+"</a></td><td>"+s+"</td><td>"+new Date(a).toLocaleString()+"</td></tr>"}return t+="</tbody></table>"}},{key:"makePlayLastGameButtonVisible",value:function(){document.getElementById("controlsArea").className="passive",document.getElementById("replayArea").className="replayArea active"}}]),e}();n.default=s},{}],14:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();var s=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return i(e,null,[{key:"getRightSettings",value:function(){return[{sx:0,sy:64,sWidth:32,sHeight:32},{sx:32,sy:64,sWidth:32,sHeight:32},{sx:64,sy:64,sWidth:32,sHeight:32},{sx:96,sy:64,sWidth:32,sHeight:32}]}},{key:"getLeftSettings",value:function(){return[{sx:0,sy:32,sWidth:32,sHeight:32},{sx:32,sy:32,sWidth:32,sHeight:32},{sx:64,sy:32,sWidth:32,sHeight:32},{sx:96,sy:32,sWidth:32,sHeight:32}]}},{key:"getDownSettings",value:function(){return[{sx:0,sy:0,sWidth:32,sHeight:32},{sx:32,sy:0,sWidth:32,sHeight:32},{sx:64,sy:0,sWidth:32,sHeight:32},{sx:96,sy:0,sWidth:32,sHeight:32}]}},{key:"getUpSettings",value:function(){return[{sx:0,sy:96,sWidth:32,sHeight:32},{sx:32,sy:96,sWidth:32,sHeight:32},{sx:64,sy:96,sWidth:32,sHeight:32},{sx:96,sy:96,sWidth:32,sHeight:32}]}}]),e}();n.default=s},{}],15:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();var s=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return i(e,null,[{key:"getRightSettings",value:function(){return[{sx:0,sy:96,sWidth:32,sHeight:48},{sx:32,sy:96,sWidth:32,sHeight:48},{sx:64,sy:96,sWidth:32,sHeight:48},{sx:96,sy:96,sWidth:32,sHeight:48}]}},{key:"getLeftSettings",value:function(){return[{sx:0,sy:48,sWidth:32,sHeight:48},{sx:32,sy:48,sWidth:32,sHeight:48},{sx:64,sy:48,sWidth:32,sHeight:48},{sx:96,sy:48,sWidth:32,sHeight:48}]}},{key:"getDownSettings",value:function(){return[{sx:0,sy:144,sWidth:32,sHeight:48},{sx:32,sy:144,sWidth:32,sHeight:48},{sx:64,sy:144,sWidth:32,sHeight:48},{sx:96,sy:144,sWidth:32,sHeight:48}]}},{key:"getUpSettings",value:function(){return[{sx:0,sy:0,sWidth:32,sHeight:48},{sx:32,sy:0,sWidth:32,sHeight:48},{sx:64,sy:0,sWidth:32,sHeight:48},{sx:96,sy:0,sWidth:32,sHeight:48}]}}]),e}();n.default=s},{}],16:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();var s=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return i(e,null,[{key:"getUpSettings",value:function(){return[{sx:0,sy:200,sWidth:100,sHeight:100},{sx:100,sy:200,sWidth:100,sHeight:100},{sx:200,sy:200,sWidth:100,sHeight:100},{sx:300,sy:200,sWidth:100,sHeight:100},{sx:400,sy:200,sWidth:100,sHeight:100},{sx:500,sy:200,sWidth:100,sHeight:100}]}},{key:"getDownSettings",value:function(){return[{sx:0,sy:0,sWidth:100,sHeight:100},{sx:100,sy:0,sWidth:100,sHeight:100},{sx:200,sy:0,sWidth:100,sHeight:100},{sx:300,sy:0,sWidth:100,sHeight:100},{sx:400,sy:0,sWidth:100,sHeight:100},{sx:500,sy:0,sWidth:100,sHeight:100}]}},{key:"getLeftSettings",value:function(){return[{sx:0,sy:300,sWidth:100,sHeight:100},{sx:100,sy:300,sWidth:100,sHeight:100},{sx:200,sy:300,sWidth:100,sHeight:100},{sx:300,sy:300,sWidth:100,sHeight:100},{sx:400,sy:300,sWidth:100,sHeight:100},{sx:500,sy:300,sWidth:100,sHeight:100}]}},{key:"getRightSettings",value:function(){return[{sx:0,sy:100,sWidth:100,sHeight:100},{sx:100,sy:100,sWidth:100,sHeight:100},{sx:200,sy:100,sWidth:100,sHeight:100},{sx:300,sy:100,sWidth:100,sHeight:100},{sx:400,sy:100,sWidth:100,sHeight:100},{sx:500,sy:100,sWidth:100,sHeight:100}]}}]),e}();n.default=s},{}]},{},[10]);